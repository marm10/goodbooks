(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{191:function(e){e.exports=JSON.parse('{"name":"frontend","version":"0.1.0","private":true,"dependencies":{"@ant-design/icons":"^4.2.2","@craco/craco":"^5.7.0","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","antd":"^4.6.4","antd-img-crop":"^3.13.1","antd-theme-webpack-plugin":"^1.3.6","aws-amplify":"^3.3.4","axios":"^0.20.0","babel-plugin-import":"^1.13.1","craco-less":"^1.17.0","less-vars-to-js":"^1.3.0","react":"^16.13.1","react-app-rewire-less":"^2.1.3","react-dom":"^16.13.1","react-images-upload":"^1.2.8","react-images-uploading":"^3.1.2","react-redux":"^7.2.1","react-router-dom":"^5.2.0","react-scripts":"3.4.3","react-toastify":"^6.0.9"},"scripts":{"start":"rescripts start","build":"rescripts build","test":"rescripts test","eject":"rescripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@rescripts/cli":"0.0.14","@rescripts/rescript-env":"0.0.12","webpack":"4.42.0"}}')},280:function(e,t,a){e.exports=a(556)},556:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),c=(a(285),a(276)),i=(a(290),a(278)),s=(a(295),a(103)),m=a(29),u=(a(300),a(121)),d=a(568),f=a(570),g=a(569),p=a(81),E=a.n(p),h=a(100),b=a(64),v=a.n(b),y=a(191),O="https://184.72.204.214:8090",j=(y.version,y.dependencies.react,v.a.create({baseURL:"".concat(O,"/api/v1"),headers:{"Content-Type":"application/json"}}));j.login=function(e){var t=e.access_token,a=e.user;localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(a))},j.setUser=function(e){localStorage.setItem("user",JSON.stringify(e))},j.logout=function(){localStorage.removeItem("user"),localStorage.removeItem("token"),j.defaults.headers.common.Authorization=void 0},j.setToken=function(){j.defaults.headers.put.Authorization="Bearer ".concat(localStorage.token)},j.loggedIn=function(){return localStorage.user},j.setUserInterests=function(e){var t=e.interests,a=JSON.parse(localStorage.user);a.interests=t,localStorage.setItem("user",JSON.stringify(a))},j.getUsername=function(){var e=j.userJSON();return e&&e.username?e.username:"G"},j.userPhoto=function(){var e=j.userJSON();return e&&e.photo?e.photo:null},j.userJSON=function(){return localStorage.user?JSON.parse(localStorage.user):null},j.getBookId=function(){var e=j.userJSON();return e?e.id:null};var w=j,S=(a(104),a(46)),k=(a(105),a(34)),I=(a(207),a(136)),C=(a(208),a(120)),F=a(149),x=a(150),L=a(173),R=a(168),P=function(){return{Authorization:"Bearer ".concat(localStorage.token),"Access-Control-Allow-Origin":"*"}},D=function(e){Object(L.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={entities:[],totalCount:0},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.get("/books").then((function(t){e.setState({entities:(t.data||[]).map((function(e){return{id:e.ID,author:e.Author,title:e.Title,cover:e.Cover,genre:e.Genre,summary:e.Summary,averageRate:e.Average,comments:e.Qtd}}))})})),w.loggedIn()&&v.a.get("".concat(O,"/api/v1/readers/").concat(w.getBookId(),"/interests"),{headers:P()}).then((function(e){e&&e.data&&w.setUserInterests({interests:e.data.map((function(e){return e.ID}))})}))}},{key:"render",value:function(){var e=this,t=C.a.Meta;return r.a.createElement(S.a,{gutter:24},this.state.entities.map((function(a,n){return r.a.createElement(k.a,{key:a.id,span:4,style:{padding:20}},r.a.createElement(C.a,{hoverable:!0,actions:[r.a.createElement(I.a,{style:{marginLeft:15},value:a.averageRate,allowHalf:!0,disabled:!0})],bordered:!1,onClick:function(){e.props.onBookClick(a)},bodyStyle:{height:120},cover:r.a.createElement("img",{style:{height:200},alt:a.title,src:a.cover})},r.a.createElement(t,{title:a.title,description:a.author})))})))}}]),a}(r.a.Component),A=(a(345),a(167)),N=a(132),z=(a(557),a(197)),T=(a(358),a(269)),U=(a(123),a(65)),B=(a(361),a(174)),J=(a(364),a(122)),q=(a(367),a(193)),M=a(277),G=(a(93),a(43)),H=(a(182),a(38)),V=(a(372),a(275)),_=a(571),K=a(562),Q=a(561),W=(a(217),a(169)),Y=(a(250),a(164)),X=(a(218),a(171)),Z=(a(385),a(279)),$=(a(183),a(75)),ee=a(118),te=a.n(ee),ae=a(158),ne=a(172),re=(a(219),a(92)),le=(a(179),a(86)),oe=a(567),ce=a(566),ie=a(565),se=a(564),me=a(563),ue=(a(220),a(221),a(165)),de=a(83);a(140);var fe=function(e){var t=e.handleCloseDrawer,a=e.showDrawer,l=e.onSubmit,o=Object(n.useState)(""),c=Object(m.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(null),f=Object(m.a)(u,2),g=f[0],p=f[1],h=Object(n.useState)(!1),b=Object(m.a)(h,2),v=b[0],y=b[1],O=Object(n.useState)({}),j=Object(m.a)(O,2),I=(j[0],j[1],Object(n.useState)(!1)),C=Object(m.a)(I,2),F=C[0],x=C[1],L=Object(n.useState)(""),R=Object(m.a)(L,2),P=(R[0],R[1],Object(n.useState)(!1)),D=Object(m.a)(P,2),A=D[0],N=D[1],z=H.a.useForm(),T=Object(m.a)(z,1)[0],U=Object(n.useState)(!1),B=Object(m.a)(U,2),J=B[0],q=B[1],M=Object(n.useState)("1"),V=Object(m.a)(M,2),_=V[0],K=V[1];Object(n.useEffect)((function(){T.resetFields()}),[a]);var Q=le.a.TabPane,ee=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var a=new FileReader;a.readAsDataURL(t.originFileObj),a.onload=function(){return e(a.result)}}));case 4:a=e.sent;case 5:(n=new Image).src=a,window.open(a).document.write(n.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(W.a,{title:"Login",width:720,onClose:function(){t()},visible:a,bodyStyle:{paddingBottom:80},footer:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(G.a,{onClick:function(){t()},style:{marginRight:8}},"Cancelar"))},r.a.createElement(H.a,{form:T,layout:"vertical",style:{width:500,marginTop:30,marginLeft:80}},r.a.createElement(le.a,{activeKey:_,onChange:function(e){K(e),T.resetFields()}},F?r.a.createElement(Q,{tab:"Recuperar Senha",key:"3"},r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Por favor, informe um e-mail v\xe1lido!"}]},r.a.createElement($.a,null))),r.a.createElement(k.a,{md:12},r.a.createElement(H.a.Item,null,r.a.createElement(G.a,{type:"default",onClick:function(){T.resetFields(),x(!1),K("1")},style:{width:"100%"}},"Voltar"))),r.a.createElement(k.a,{md:12},r.a.createElement(H.a.Item,null,r.a.createElement(G.a,{type:"primary",loading:A,onClick:function(){N(!0),T.validateFields().then((function(e){console.log(e);var t=e;w.post("/sendemail",{email:t.email}).then((function(e){console.log(e),N(!1)})).catch((function(e){N(!1)}))}))},style:{width:"100%"}},"Recuperar"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{tab:"Entrar",key:1},r.a.createElement(H.a.Item,{name:"email",rules:[{required:!0,message:"Por favor, informe o e-mail!"}]},r.a.createElement($.a,{prefix:r.a.createElement(d.a,{className:"site-form-item-icon"}),placeholder:"E-mail"})),r.a.createElement(H.a.Item,{name:"password",rules:[{required:!0,message:"Por favor, informe a senha!"}]},r.a.createElement($.a.Password,{prefix:r.a.createElement(oe.a,{className:"site-form-item-icon"}),placeholder:"Senha",iconRender:function(e){return e?r.a.createElement(ce.a,null):r.a.createElement(ie.a,null)}})),J?r.a.createElement(Z.a,{message:"E-mail n\xe3o cadastrado ou senha inv\xe1lida!",type:"error"}):null,r.a.createElement(H.a.Item,null,r.a.createElement("a",{onClick:function(e){e.preventDefault(),x(!0),K("3")},style:{float:"right"},href:""},"Esqueci minha senha")),r.a.createElement(H.a.Item,null,r.a.createElement(G.a,{loading:A,onClick:function(){q(!1),N(!0),T.validateFields(["email","password"]).then((function(e){var a=e;w.post("/login",{email:a.email,password:a.password}).then((function(e){de.b.success("Login efetuado com successo!"),console.log(e);var a=e.data.reader;w.login({access_token:e.data.token,user:{email:a.Email,age:a.Age,username:a.Name,id:a.ID,photo:a.Photo}}),N(!1),t(),l()})).catch((function(e){e&&e.response&&401==e.response.status&&(N(!1),q(!0))}))}))},type:"primary",style:{width:"100%"}},"Entrar"))),r.a.createElement(Q,{tab:"Registre-se",key:2},r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:18},r.a.createElement(H.a.Item,{name:"username",label:"Nome de usu\xe1rio",rules:[{required:!0,message:"Por favor, informe o nome de usu\xe1rio!"}]},r.a.createElement($.a,null))),r.a.createElement(k.a,{md:6},r.a.createElement(H.a.Item,{name:"age",label:"Idade",rules:[{type:"number",min:0,max:99,message:"Por favor, informe um n\xfamero entre 0 e 99!"}]},r.a.createElement(X.a,null)))),r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Por favor, informe um e-mail v\xe1lido!"}]},r.a.createElement($.a,null)))),r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,{name:"password",label:"Senha",rules:[{required:!0,message:"Por favor, informe a senha!"}]},r.a.createElement($.a.Password,{iconRender:function(e){return e?r.a.createElement(ce.a,null):r.a.createElement(ie.a,null)}})))),r.a.createElement(H.a.Item,{label:"Foto"},r.a.createElement(H.a.Item,{name:"photo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},noStyle:!0},r.a.createElement(ue.a,{rotate:!0},r.a.createElement(Y.a.Dragger,{onPreview:ee,style:i?{width:100,height:100}:{},action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:function(e){return"image/jpeg"===e.type||"image/png"===e.type||re.b.error("You can only upload JPG/PNG file!"),e.size/1024/1024<2||re.b.error("Image must smaller than 2MB!"),s(URL.createObjectURL(e)),p(e),!1},name:"files",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){s(e),y(!1)})):y(!0)}},i?r.a.createElement(E.a,{size:64,src:i}):r.a.createElement(r.a.Fragment,null,v?r.a.createElement(se.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(me.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Clique ou arraste o arquivo para carregar."))))))),r.a.createElement(S.a,null,r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,null,r.a.createElement(G.a,{loading:A,onClick:function(){var e=new FormData;N(!0),T.validateFields().then((function(t){var a=t.username,n=Object(ne.a)(t,["username"]);Object.entries(n).map((function(t,a){var n=Object(m.a)(t,2),r=n[0],l=n[1];e.append(r,l)})),e.append("name",a),e.append("profile",g),console.log(g),w.post("/register",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){de.b.success("Registro Criado! Por favor, fa\xe7a login para continuar."),N(!1),K("1"),q(!1),T.resetFields()}))}))},type:"primary",style:{width:"100%",float:"right"}},"Salvar")))),r.a.createElement(de.a,null))))))},ge=a(266),pe=a.n(ge);var Ee=function(e){var t,a=e.book,l=e.showModal,o=e.onOk,c=e.reloadBook,i=e.setShowUser,s=Object(n.useState)({}),u=Object(m.a)(s,2),d=u[0],f=u[1],g=Object(n.useState)(!1),p=Object(m.a)(g,2),h=p[0],b=p[1],y=Object(n.useState)(!1),j=Object(m.a)(y,2),C=j[0],F=j[1],x=V.a.Paragraph,L=Object(n.useState)({}),R=Object(m.a)(L,2),D=R[0],W=R[1],Y=Object(n.useState)(""),X=Object(m.a)(Y,2),Z=X[0],$=X[1],ee=Object(n.useState)(5),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),le=Object(m.a)(re,2),oe=le[0],ce=le[1],ie=Object(n.useState)(!1),se=Object(m.a)(ie,2),me=se[0],ue=se[1],de=Object(n.useState)([]),ge=Object(m.a)(de,2),Ee=ge[0],he=ge[1],be=Object(n.useState)(!1),ve=Object(m.a)(be,2),ye=ve[0],Oe=ve[1],je=H.a.useForm(),we=Object(m.a)(je,1)[0];function Se(){W(JSON.parse(localStorage.user))}Object(n.useEffect)((function(){f(a.id),b(!1),F(!1),$(""),ne(5),he([]),ue(!1);var e=w.userJSON();we.resetFields(),Oe(e&&e.interests&&e.interests.includes(a.id))}),[a]);var ke=function(e){e.onChange;var t=e.onSubmit,a=e.submitting;e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{form:we},r.a.createElement(H.a.Item,{name:"userComment"},r.a.createElement(pe.a,{rows:4})),r.a.createElement(S.a,null,r.a.createElement(H.a.Item,null,r.a.createElement(I.a,{defaultValue:5,value:ae,onChange:ne,style:{marginRight:20},allowHalf:!0})),r.a.createElement(H.a.Item,null,r.a.createElement(G.a,{htmlType:"submit",loading:a,onClick:t,type:"primary"},"Salvar Avalia\xe7\xe3o")))))};function Ie(e){$(e.target.value)}function Ce(){ce(!0),we.validateFields().then((function(e){var t=e.userComment,a=ae,n=w.getBookId(),r={comment:t,rate:a,reader_id:n};v.a.post("".concat(O,"/api/v1/books/").concat(d,"/comments"),r,{headers:P()}).then((function(e){ce(!1),ue(!0),he([].concat(Object(M.a)(Ee),[{reader:D.username,comment:t,rate:a,picture:D.photo||"https://dad-react-static.s3.us-east-2.amazonaws.com/icon.png"}])),c()}))}))}var Fe=function(){return me?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{avatar:r.a.createElement(E.a,{src:D.photo||"https://dad-react-static.s3.us-east-2.amazonaws.com/icon.png",alt:D.username}),content:r.a.createElement(ke,{onChange:Ie,onSubmit:Ce,submitting:oe,value:Z})}))};return r.a.createElement(A.a,{width:900,onCancel:o,onOk:o,visible:l},r.a.createElement(S.a,{gutter:24},r.a.createElement("img",{style:{height:300,marginRight:20},width:"25%",alt:a.title,src:a.cover}),r.a.createElement(J.a,{title:"Info",column:1,style:{display:"inline-block",width:"70%"}},r.a.createElement(J.a.Item,{label:"T\xedtulo"},a.title),r.a.createElement(J.a.Item,{label:"Autor"},a.author),r.a.createElement(J.a.Item,{label:"G\xeanero"},a.genre),r.a.createElement(J.a.Item,{label:"Resumo"},r.a.createElement(x,{ellipsis:{rows:5,expandable:!0,symbol:"mais"}},a.summary)))),r.a.createElement(S.a,{style:{marginTop:30},gutter:24},r.a.createElement(I.a,{style:{marginLeft:15},value:a.averageRate,allowHalf:!0,disabled:!0}),a.comments>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{style:{paddingLeft:8},value:a.averageRate,suffix:"/ 5"}),r.a.createElement(k.a,{md:10},r.a.createElement("a",{onClick:function(){w.loggedIn()?w.get("".concat(O,"/api/v1/books/").concat(d,"/comments"),{headers:P()}).then((function(e){var t=e.data.map((function(e){return{reader:e.User,email:e.Email,comment:e.Comment,rate:e.Rate,picture:e.UserPhoto||"https://dad-react-static.s3.us-east-2.amazonaws.com/icon.png"}}));Se(),ue(t.some((function(e){return e.email===JSON.parse(localStorage.user).email}))),he(t),b(!0)})):F(!0)}},r.a.createElement(B.a,{prefix:r.a.createElement(_.a,null),style:{paddingLeft:8},value:a.comments,suffix:"avalia\xe7\xf5es"})))):r.a.createElement(k.a,{md:11},"Este livro ainda n\xe3o foi avaliado.",r.a.createElement(G.a,{onClick:function(){w.loggedIn()?(Se(),b(!0)):F(!0)},style:{marginTop:4},type:"text"},r.a.createElement("span",{style:{fontWeight:"bold",color:"teal"}},"Deixe sua avalia\xe7\xe3o."))),r.a.createElement(k.a,{md:8},ye?r.a.createElement(U.a,{title:"Tenho interesse"},r.a.createElement(G.a,{type:"primary",style:{float:"right",marginLeft:15},shape:"circle",size:"large",icon:r.a.createElement(K.a,null),onClick:function(){w.loggedIn()&&a.interestId&&(v.a.delete("".concat(O,"/api/v1/readers/").concat(w.getBookId(),"/interests/").concat(a.interestId),{headers:P()}).then((function(e){})),Oe(!1),o())}})):r.a.createElement(U.a,{title:"Tenho interesse"},r.a.createElement(G.a,{style:{float:"right",marginLeft:15},shape:"circle",size:"large",icon:r.a.createElement(Q.a,null),onClick:function(){if(w.loggedIn()){var e={book_id:d};v.a.post("".concat(O,"/api/v1/readers/").concat(w.getBookId(),"/interests"),e,{headers:P()}).then((function(e){})),Oe(!0),v.a.get("".concat(O,"/api/v1/readers/").concat(w.getBookId(),"/interests"),{headers:P()}).then((function(e){e&&e.data&&w.setUserInterests({interests:e.data.map((function(e){return e.ID}))})}))}else F(!0)}})))),h?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{orientation:"left"},"Coment\xe1rios"),r.a.createElement(z.b,(t={split:!1,className:"comment-list",itemLayout:"horizontal",dataSource:Ee,style:{width:"100%"},size:"small"},Object(N.a)(t,"itemLayout","horizontal"),Object(N.a)(t,"renderItem",(function(e){return r.a.createElement("div",null,r.a.createElement(z.b.Item,{extra:r.a.createElement(B.a,{style:{paddingTop:8},value:e.rate,suffix:"/ 5"})},r.a.createElement(q.a,{author:e.reader,avatar:r.a.createElement(E.a,{src:e.picture,alt:e.reader}),content:e.comment})))})),t)),r.a.createElement(Fe,null)):null,r.a.createElement(fe,{onSubmit:function(){i(!0)},handleCloseDrawer:function(){return F(!1)},showDrawer:C}))},he=function(e){Object(L.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={entities:[],totalCount:0},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(O,"/api/v1/readers/").concat(w.getBookId(),"/interests"),{headers:P()}).then((function(t){t&&t.data&&e.setState({entities:(t.data||[]).map((function(e){return{id:e.ID,interestId:e.Interestid,author:e.Author,title:e.Title,cover:e.Cover,genre:e.Genre,summary:e.Summary,averageRate:e.Average,comments:e.Qtd}}))})}))}},{key:"render",value:function(){var e=this,t=C.a.Meta;return r.a.createElement(S.a,{gutter:24},this.state.entities.map((function(a,n){return r.a.createElement(k.a,{key:a.id,span:4,style:{padding:20}},r.a.createElement(C.a,{hoverable:!0,bordered:!1,onClick:function(){e.props.onBookClick(a)},bodyStyle:{height:120},cover:r.a.createElement("img",{style:{height:200},alt:a.title,src:a.cover})},r.a.createElement(t,{title:a.title,description:a.author})))})))}}]),a}(r.a.Component),be=a(194);var ve=function(e){var t=e.handleCloseDrawer,a=e.showDrawer,l=e.onSubmit,o=e.userDetails,c=Object(n.useState)(""),i=Object(m.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(null),f=Object(m.a)(d,2),g=f[0],p=f[1],h=Object(n.useState)(!1),b=Object(m.a)(h,2),y=b[0],j=b[1],w=Object(n.useState)({}),I=Object(m.a)(w,2),C=(I[0],I[1],Object(n.useState)(!1)),F=Object(m.a)(C,2),x=(F[0],F[1],Object(n.useState)("")),L=Object(m.a)(x,2),R=(L[0],L[1],Object(n.useState)(!1)),D=Object(m.a)(R,2),A=D[0],N=D[1],z=H.a.useForm(),T=Object(m.a)(z,1)[0],U=Object(n.useState)(!1),B=Object(m.a)(U,2),J=(B[0],B[1],Object(n.useState)("1")),q=Object(m.a)(J,2),M=q[0],V=q[1];Object(n.useEffect)((function(){T.resetFields()}),[a]),Object(n.useEffect)((function(){if(o&&o.photo){u(o.photo);var e=null,t=new XMLHttpRequest;t.open("GET",o.photo),t.responseType="blob",t.onload=function(){e=t.response},t.send(),p(new File([e],o.photo.substring(o.photo.lastIndexOf("/"))))}}),[o]);var _=le.a.TabPane,K=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var a=new FileReader;a.readAsDataURL(t.originFileObj),a.onload=function(){return e(a.result)}}));case 4:a=e.sent;case 5:(n=new Image).src=a,window.open(a).document.write(n.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(W.a,{title:"Login",width:720,onClose:function(){t()},visible:a,bodyStyle:{paddingBottom:80},footer:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(G.a,{onClick:function(){t()},style:{marginRight:8}},"Cancelar"))},r.a.createElement(H.a,{initialValues:o,form:T,layout:"vertical",style:{width:500,marginTop:30,marginLeft:80}},r.a.createElement(le.a,{activeKey:M,onChange:function(e){V(e),T.resetFields()}},r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{tab:"Atualize seus dados",key:"1"},r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Por favor, informe um e-mail v\xe1lido!"}]},r.a.createElement($.a,{disabled:!0})))),r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:18},r.a.createElement(H.a.Item,{name:"username",label:"Nome de usu\xe1rio",rules:[{required:!0,message:"Por favor, informe o nome de usu\xe1rio!"}]},r.a.createElement($.a,null))),r.a.createElement(k.a,{md:6},r.a.createElement(H.a.Item,{name:"age",label:"Idade",rules:[{type:"number",min:0,max:99,message:"Por favor, informe um n\xfamero entre 0 e 99!"}]},r.a.createElement(X.a,null)))),r.a.createElement(S.a,{gutter:24},r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,{name:"password",label:"Senha"},r.a.createElement($.a.Password,{iconRender:function(e){return e?r.a.createElement(ce.a,null):r.a.createElement(ie.a,null)}})))),r.a.createElement(H.a.Item,{label:"Foto"},r.a.createElement(H.a.Item,{name:"photo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},noStyle:!0},r.a.createElement(ue.a,{rotate:!0},r.a.createElement(Y.a.Dragger,{onPreview:K,style:s?{width:100,height:100}:{},action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:function(e){return"image/jpeg"===e.type||"image/png"===e.type||re.b.error("You can only upload JPG/PNG file!"),e.size/1024/1024<2||re.b.error("Image must smaller than 2MB!"),u(URL.createObjectURL(e)),p(e),!1},name:"files",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){u(e),j(!1)})):j(!0)}},s?r.a.createElement(E.a,{size:64,src:s}):r.a.createElement(r.a.Fragment,null,y?r.a.createElement(se.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(me.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Clique ou arraste o arquivo para carregar."))))))),r.a.createElement(S.a,null,r.a.createElement(k.a,{md:24},r.a.createElement(H.a.Item,null,r.a.createElement(G.a,{loading:A,onClick:function(){N(!0);var e=new FormData;T.validateFields().then((function(a){var n=a.username,r=Object(ne.a)(a,["username"]);Object.entries(r).map((function(t,a){var n=Object(m.a)(t,2),r=n[0],l=n[1];e.append(r,l)})),e.append("name",n),e.append("profile",g),v.a.patch("".concat(O,"/api/v1/readers/").concat(o.id),e,{headers:Object(be.a)(Object(be.a)({},P()),{},{"Content-Type":"multipart/form-data"})}).then((function(e){de.b.success("Dados atualizados com sucesso!");var a={email:r.email,age:r.age,username:n,id:e.data.ID,photo:e.data.Photo};N(!1),T.resetFields(),t(),l(a)}))}))},type:"primary",style:{width:"100%",float:"right"}},"Atualizar")))))))))};var ye=function(){console.log(w.userPhoto());var e=u.a.Header,t=u.a.Footer,a=u.a.Content,l=Object(n.useState)({}),o=Object(m.a)(l,2),p=o[0],b=o[1],v=Object(n.useState)(!1),y=Object(m.a)(v,2),O=y[0],j=y[1],S=Object(n.useState)(!1),k=Object(m.a)(S,2),I=k[0],C=k[1],F=Object(n.useState)(!1),x=Object(m.a)(F,2),L=x[0],R=x[1],P=document.location.href.substring(document.location.href.lastIndexOf("/")),A=function(e){b(e),j(!0)};Object(n.useEffect)((function(){C(w.loggedIn())}),[]);var N=r.a.createElement(s.a,null,r.a.createElement(s.a.Item,{key:"1",onClick:function(){R(!0)},icon:r.a.createElement(d.a,null)},"Meus Dados"),r.a.createElement(s.a.Item,{onClick:function(){de.b.success("Logout realizado!"),C(!1),w.logout()},key:"2",icon:r.a.createElement(f.a,null)},"Sair"));return r.a.createElement(u.a,null,r.a.createElement(e,{style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement("div",{className:"logo",style:{width:200,height:40,margin:"0px 24px 16px 0",float:"left"}},r.a.createElement(h.b,{to:"/"},r.a.createElement("img",{height:40,src:"https://dad-react-static.s3.us-east-2.amazonaws.com/untitled.png"}))),r.a.createElement(s.a,{selectedKeys:"/interests"===P?["2"]:["1"],theme:"dark",mode:"horizontal"},r.a.createElement(s.a.Item,{key:"1"},r.a.createElement(h.b,{to:"/"},"Todos os Livros")),I?r.a.createElement(s.a.Item,{key:"2"},r.a.createElement(h.b,{to:"/interests"},"Meus Livros")):null,I?r.a.createElement("div",{style:{float:"right",marginRight:40},key:"4"},r.a.createElement(i.a,{overlay:N,trigger:["click"],placement:"bottomLeft"},r.a.createElement("a",{onClick:function(e){e.preventDefault()}},w.userPhoto()?r.a.createElement(E.a,{size:48,src:w.userPhoto()}):r.a.createElement(E.a,{size:48,style:{background:"#f0f2f5",color:"teal",fontWeight:"bold"}},w.getUsername()[0])))):null)),r.a.createElement(u.a,null,r.a.createElement(a,{style:{padding:"0 50px",marginTop:64}},r.a.createElement("div",{style:{background:"#f0f2f5",padding:"24px",minHeight:"600px"}},"/interests"===P&&w.loggedIn()?r.a.createElement(he,{onBookClick:A}):r.a.createElement(D,{onBookClick:A})),r.a.createElement(c.a,null,r.a.createElement("div",{style:{height:50,width:50,lineHeight:"40px",borderRadius:4,backgroundColor:"teal",color:"#fff",textAlign:"center",verticalAlign:"middle",fontSize:20}},r.a.createElement(g.a,null))))),r.a.createElement(t,{style:{textAlign:"center"}},"Footer"),r.a.createElement(Ee,{setShowUser:C,showModal:O,book:p,reloadBook:function(){w.get("/books/".concat(p.id)).then((function(e){var t=e.data;b({id:t.ID,author:t.Author,title:t.Title,cover:t.Cover,genre:t.Genre,summary:t.Summary,averageRate:t.Average,comments:t.Qtd})}))},onOk:function(){j(!1),b({})}}),r.a.createElement(ve,{onSubmit:function(e){w.setUser(e)},handleCloseDrawer:function(){return R(!1)},showDrawer:L,userDetails:w.userJSON()}),r.a.createElement(de.a,null))},Oe=a(51),je=function(){return r.a.createElement(h.a,null,r.a.createElement(Oe.c,null,r.a.createElement(Oe.a,{path:"/interests"},r.a.createElement(ye,null)),r.a.createElement(Oe.a,{path:"/"},r.a.createElement(ye,null))))};var we=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(je,null,r.a.createElement(ye,null)))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root"))}},[[280,1,2]]]);
//# sourceMappingURL=main.c9f28c52.chunk.js.map